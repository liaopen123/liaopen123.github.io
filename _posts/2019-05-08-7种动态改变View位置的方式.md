---
layout:     post
title:  7ç§åŠ¨æ€æ”¹å˜Viewä½ç½®çš„æ–¹å¼
subtitle: æœ€å¥½çš„è¿˜æ˜¯ç¬¬ä¸€ç§onlayoutçš„æ–¹å¼ï¼Œå…¶ä»–çš„æœ‰ç‚¹åªèƒ½å®ç°ç§»åŠ¨ä½ç½®çš„éƒ¨åˆ†åŠŸèƒ½ä½†å´ä¸æ–¹ä¾¿ï¼Œåªæ˜¯æä¾›äº†ä¸€äº›å¯èƒ½æ€§ã€‚
date:     2019-05-08
author:     Pony
header-img: img/post-bg-mayday-bubble.jpg
catalog: true
tags:
    - è‡ªå®šä¹‰view
---



## æ”¹å˜Viewçš„ä½ç½®çš„7ç§æ–¹å¼:
æ”¹å˜viewçš„ä½ç½®ï¼Œè¿™äº›åœ¨å¼€å‘ä¸­ï¼Œå†å¸¸è§ä¸è¿‡äº†ï¼Œéœ€è¦æ€»ç»“ä¸€ä¸‹ï¼Œä¸‹æ¬¡åœ¨é‡åˆ°çš„è¯ï¼Œå°±ä¸ä¼šä¸çŸ¥æ‰€æªï¼Œä¹Ÿä¸ç”¨ï¼Œå†å»ä¸€ä¸ªä¸€ä¸ªæ‰¾èµ„æ–™äº†ã€‚

### 1.é€šè¿‡`onLayout`å®ç°æ»‘åŠ¨:
onLayout ä¼šå¯¼è‡´ `getLeft(),getRight(),getTop(),getBottom()`ç­‰å€¼ç›¸åº”çš„**å‘ç”Ÿå˜åŒ–**ã€‚

ä¸‹é¢çš„2ç§æ–¹å¼çš„åŒºåˆ«ï¼š
* `rawX,rawY`è·å–çš„æ˜¯åœ¨è§¦æ‘¸ç‚¹åœ¨å±å¹•çš„ç»å¯¹ä½ç½®,æ‰€ä»¥åœ¨æ‰§è¡Œå®Œ`onMove`ä¹‹åï¼Œè¿˜éœ€è¦æŠŠmoveæ—¶å€™å¾—åˆ°çš„åæ ‡ï¼Œèµ‹å€¼ç»™lastX,Y,ä¸‹æ¬¡moveå¾—åˆ°çš„åæ ‡-lastX,Y,å³ä¸ºåç§»é‡offsetã€‚
* è€Œ`event.x,y`å¾—åˆ°çš„æ˜¯è§¦æ‘¸ç‚¹è·ç¦»viewè¾¹ç¼˜çš„è·ç¦»ï¼Œæ¯æ¬¡`onMove`å¾—åˆ°çš„X,Y-`downå¾—åˆ°çš„X,Y`å³ä¸ºæ¯æ¬¡çš„åç§»é‡ã€‚

#### 1.1é€šè¿‡rawX,rawYè¿›è¡Œä½ç§»ï¼š
```kotlin
class Drag1OnLayoutRawXView(context: Context, attrs: AttributeSet) : ImageView(context, attrs) {


    private val TAG: String? = "Drag1OnLayoutView"
    private var starX: Float = 0.0f
    private var starY: Float = 0.0f


    @SuppressLint("ClickableViewAccessibility")
    override fun onTouchEvent(event: MotionEvent?): Boolean {

        var x = event!!.rawX
        var y = event.rawY



        when (event.action) {

            MotionEvent.ACTION_DOWN -> {
                starX = x
                starY = y
            }

            MotionEvent.ACTION_MOVE -> {
                val offsetX = x - starX
                val offsetY = y - starY

                    this.layout(
                        (left + offsetX).toInt(), (top + offsetY).toInt(), (right + offsetX).toInt(),
                        (bottom + offsetY).toInt()
                    )
                starX = x
                starY = y
            }
        }


        return true
    }
}
```

#### 1.2é€šè¿‡x,yè¿›è¡Œä½ç§»ï¼š
```kotlin
class Drag1OnLayoutXView : ImageView {


    private val TAG: String?  ="Drag1OnLayoutXView"
    private var lastX: Int = 0
    private var lastY: Int = 0


    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {}

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {}

    constructor(context: Context) : super(context) {}


    override fun onTouchEvent(event: MotionEvent): Boolean {


        //è·å–åˆ°æ‰‹æŒ‡å¤„çš„æ¨ªåæ ‡å’Œçºµåæ ‡
        val x = event.x.toInt()  //
        val y = event.y.toInt()
        Log.e(TAG,"event.x${event.x},event.Y${event.y}")

        when (event.action) {
            MotionEvent.ACTION_DOWN -> {

                lastX = x
                lastY = y
            }

            MotionEvent.ACTION_MOVE -> {

                //è®¡ç®—ç§»åŠ¨çš„è·ç¦»
                val offX = x - lastX
                val offY = y - lastY
                //è°ƒç”¨layoutæ–¹æ³•æ¥é‡æ–°æ”¾ç½®å®ƒçš„ä½ç½®
                layout(
                    left + offX, top + offY,
                    right + offX, bottom + offY
                )
            }
        }

        return true
    }
}
```

è¾¹ç•Œåˆ¤æ–­æ¡ä»¶:layoutæ–¹æ³•é‡Œé¢çš„å››ä¸ªå€¼ï¼Œä¸èƒ½å¤§äºçˆ¶viewçš„å®½åº¦ï¼Œä¸èƒ½å°äº0å³å¯ã€‚
è¿”å›åŠ¨ç”»:é€šè¿‡ValueAnimationï¼Œä»å½“å‰layoutçš„å€¼ï¼Œä¸€ç›´ç¼©å°ä¸º0ï¼Œå³å¯è´´è¾¹ã€‚
ç›¸å…³ä»£ç ï¼š[DragImageView.kt](https://github.com/liaopen123/ViewCollection/blob/master/app/src/main/java/almostlover/com/viewcollection/views/dragview/DragImageView.kt)

### 2.offsetLeftAndRight()å’ŒoffsetTopAndBottom()
ä¼šå¯¼è‡´ `getLeft(),getRight(),getTop(),getBottom()`ç­‰å€¼ç›¸åº”çš„**å‘ç”Ÿå˜åŒ–**ã€‚
æ¼”ç¤ºä»£ç :
```kotlin
class Drag2OffsetLeftAndRightOffsetTopAndBottomView : ImageView {


    private val TAG: String?  ="Drag1OnLayoutXView"
    private var lastX: Int = 0
    private var lastY: Int = 0


    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {}

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {}

    constructor(context: Context) : super(context) {}


    override fun onTouchEvent(event: MotionEvent): Boolean {


        //è·å–åˆ°æ‰‹æŒ‡å¤„çš„æ¨ªåæ ‡å’Œçºµåæ ‡
        val x = event.x.toInt()  //
        val y = event.y.toInt()
        Log.e(TAG,"event.x${event.x},event.Y${event.y}")

        when (event.action) {
            MotionEvent.ACTION_DOWN -> {

                lastX = x
                lastY = y
            }

            MotionEvent.ACTION_MOVE -> {

                //è®¡ç®—ç§»åŠ¨çš„è·ç¦»
                val offX = x - lastX
                val offY = y - lastY

                offsetLeftAndRight(offX)
                offsetTopAndBottom(offY)

            }
        }

        return true
    }
}
```

### 3.LayoutParams
getLeft()ç­‰å€¼ä¸æ”¹å˜ã€‚
**è¿™ä¸ªä¼šæœ‰ä¸€ä¸ªé—®é¢˜**ï¼Œæˆ‘æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°å¤„ç†æ–¹æ¡ˆï¼Œå°±æ˜¯`setLayoutParams(lp);`è¿™ä¸ªæ–¹æ³•å†…éƒ¨ ä¼šè°ƒç”¨`parent.RequestLayout()`,è¿™ä¸ªæ–¹æ³•ä¼šå¯¼è‡´æ§ä»¶ä¼š**é‡æ–°æ‰§è¡Œ `onMesure() onLayout()`** ã€‚ä¸Šé¢æ‰€æœ‰çš„ä½ç§»æ–¹æ³•äº§ç”Ÿçš„æ•ˆæœéƒ½ä¼šå› ä¸ºè°ƒç”¨è¿™ä¸ªæ–¹æ³•è€Œå¤åŸã€‚æœ‰ç‚¹è›‹ç–¼ã€‚æˆ‘å…ˆè®°ç€ã€‚åˆ°æ—¶å€™æŸ¥æŸ¥å…·ä½“æ€ä¹ˆæ”¹ã€‚
```kotlin
class Drag3LayoutParamsView : ImageView {


    private val TAG: String?  ="Drag1OnLayoutXView"
    private var lastX: Int = 0
    private var lastY: Int = 0


    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {}

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {}

    constructor(context: Context) : super(context) {}


    override fun onTouchEvent(event: MotionEvent): Boolean {


        //è·å–åˆ°æ‰‹æŒ‡å¤„çš„æ¨ªåæ ‡å’Œçºµåæ ‡
        val x = event.x.toInt()  //
        val y = event.y.toInt()
        Log.e(TAG,"event.x${event.x},event.Y${event.y}")

        when (event.action) {
            MotionEvent.ACTION_DOWN -> {

                lastX = x
                lastY = y
            }

            MotionEvent.ACTION_MOVE -> {

                //è®¡ç®—ç§»åŠ¨çš„è·ç¦»
                val offX = x - lastX
                val offY = y - lastY


                val marginLayoutParams = layoutParams as ViewGroup.MarginLayoutParams
                marginLayoutParams.leftMargin = left+offX
                marginLayoutParams.topMargin = top+offY
                layoutParams = marginLayoutParams

            }
        }

        return true
    }
}
```


### 4.ScrollToå’ŒScrollBy
getLeft()ç­‰å€¼ä¸æ”¹å˜ã€‚
sceollTo(x,y)ä¼ å…¥çš„åº”è¯¥æ˜¯ç§»åŠ¨çš„ç»ˆç‚¹åæ ‡ï¼Œè€ŒscrollBy(dx,dy)ä¼ å…¥çš„æ˜¯
ç§»åŠ¨çš„å¢é‡ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•è¦åœ¨viewæ‰€åœ¨çš„viewGroupä¸­ä½¿ç”¨ï¼ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼š**é€šè¿‡scrollByä¼ å…¥çš„å€¼åº”è¯¥æ˜¯ä½ éœ€è¦çš„é‚£ä¸ªå¢é‡çš„ç›¸åæ•°ï¼**è¿™æ ·å­æ‰èƒ½è¾¾åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼ï¼åˆ‡è®°åˆ‡è®°ã€‚
è¿™é‡Œï¼Œå¦‚æœåœ¨è¿™ä¸ªViewçš„parentä¸­è¿˜æœ‰å…¶å®ƒçš„View,ä¹Ÿä¼šä¸€èµ·æ»‘åŠ¨ã€‚
```kotlin
public boolean onTouchEvent(MotionEvent event) {
        
        //è·å–åˆ°æ‰‹æŒ‡å¤„çš„æ¨ªåæ ‡å’Œçºµåæ ‡
        int x = (int) event.getX();
        int y = (int) event.getY();
        
        switch(event.getAction())
        {
        case MotionEvent.ACTION_DOWN:
            
            lastX = x;
            lastY = y;
            
            break;
            
        case MotionEvent.ACTION_MOVE:
            
            //è®¡ç®—ç§»åŠ¨çš„è·ç¦»
            int offX = x - lastX;
            int offY = y - lastY;
            
        ((View) getParent()).scrollBy(-offX,- offY);

            break;
        }
        
        return true;
    }
```
å› ä¸ºæ˜¯` ((View) getParent()).scrollBy(-offX,- offY);`,æ‰€ä»¥æ•´ä¸ªViewGroupéƒ½ä¼šè·Ÿç€ç§»åŠ¨ã€‚ğŸ˜¿
ä½¿ç”¨scrollTo/scrollByæ—¶å€™ï¼Œè¦æ³¨æ„åˆ°:
* ç§»åŠ¨è®¡ç®—å€¼ = æœ€å¼€å§‹ç‚¹åæ ‡ - æœ€åç§»åŠ¨åˆ°çš„åæ ‡
* ((View)getParent()),Viewçš„scrollTo/scrollByç§»åŠ¨çš„å¯¹è±¡æ˜¯Viewçš„Contentï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆå–å¾—è¦ç§»åŠ¨å¯¹è±¡çš„parentï¼Œå†è¿›è¡Œç§»åŠ¨ã€‚å¦‚æœä¸åŠ çš„è¯ï¼Œä»¥TextViewä¸ºä¾‹å­ï¼Œåˆ™ç§»åŠ¨çš„å°†ä¼šæ˜¯æ–‡å­—å†…å®¹ã€‚
* å¦‚æœåœ¨ViewGroupä¸­ä½¿ç”¨scroll,åˆ™ç§»åŠ¨çš„å°†æ˜¯æ‰€æœ‰çš„å­View.

### 5 åŠ¨ç”»
#### 5.1 å±æ€§åŠ¨ç”»ï¼šObjectAnimator
getLeft()ç­‰å€¼ä¸æ”¹å˜ã€‚
æ‰‹æŒ‡æ‹–åŠ¨ä½¿ç”¨è¯¥æ–¹æ³•ä¸å®ç”¨ã€‚
```kotlin
AnimatorSet set = new AnimatorSet();
set.playTogether(
        ObjectAnimator.ofFloat(this, "translationX", 50),
        ObjectAnimator.ofFloat(this,"translationY", 100));
set.start();
```

#### 5.2 ä½ç§»åŠ¨ç”» TranslateAnimation
getLeft()ç­‰å€¼ä¸æ”¹å˜ã€‚
ä¸å®ç”¨ï¼Œtweenanimationçš„ç¼ºç‚¹ ä¸å¤šè¯´ã€‚
```kotlin
TranslateAnimation anim = new TranslateAnimation(0,50,0,100);
anim.setFillAfter(true);
startAnimation(anim);
```
### 6.Scroller
åˆ©ç”¨Scrollerå®ç°æ»‘åŠ¨ éœ€è¦3ä¸ªæ­¥éª¤:
```kotlin 
//æ­¥éª¤1ï¼šåˆå§‹åŒ–Scrollerå¯¹è±¡ï¼Œå³
mScroller = new Scroller(context)

//æ­¥éª¤2: é‡å†™computeScroll()æ–¹æ³•ï¼Œå®ç°æ¨¡æ‹Ÿæ»‘åŠ¨ã€‚å¯ä»¥å¤åˆ¶ä¸‹é¢çš„æ¨¡æ¿ä»£ç ï¼š
public void computeScroll() {
            super.computeScroll();
            
            if(mScroller.computeScrollOffset())
            {
                ((View)getParent()).scrollTo(mScroller.getCurrX(),
                        mScroller.getCurrY());
            }
            
            invalidate();//å¿…é¡»è¦è°ƒç”¨
        }
        
        // æ­¥éª¤3ï¼š
     å¼€å¯æ¨¡æ‹Ÿè¿‡ç¨‹ï¼Œåœ¨åˆé€‚çš„åœ°æ–¹ï¼ˆä¸€èˆ¬éƒ½åœ¨moveä¸­ï¼‰startScrollæ–¹æ³•ã€‚å®ƒæœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•å¦‚ä¸‹ï¼š
     startScroll(int startX,int startY, int dx,int dy,int duration)
     startScroll(int startX,int startY,int dx,int dy)
     æ–¹æ³•ä¸­çš„å‚æ•°æ— éœ€å¤šè§£é‡Šäº†ï¼Œå°±æ˜¯èµ·å§‹åæ ‡ä¸åç§»é‡ï¼Œè¿˜æœ‰å®Œæˆåç§»çš„æ—¶é—´è€Œå·²ã€‚
```
å…·ä½“çš„å®ç°ä»£ç ï¼š
è¿™é‡Œä¸»è¦å°±æ˜¯å°†å®ç°çš„æ»‘åŠ¨æ•ˆæœæ›¿æ¢æˆäº†ç”¨scrollByæ¥å®ç°å³æ—¶æ»‘åŠ¨ï¼Œç„¶ååœ¨æ‰‹æŒ‡æŠ¬èµ·çš„upæ–¹æ³•ä¸­ï¼Œåˆ©ç”¨
Scollerç±»å°†viewæ”¾å›åŸæ¥ä½ç½®ï¼è¿è¡Œä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœï¼Œå¦‚ä¸‹
```kotlin
class Drag6ScrollerView(context: Context, attrs: AttributeSet) : ImageView(context, attrs) {


    private var mScroller: Scroller = Scroller(context)
    private val TAG: String? = "Drag1OnLayoutView"
    private var lastX: Int = 0
    private var lastY: Int = 0


    override fun onTouchEvent(event: MotionEvent): Boolean {

        //è·å–åˆ°æ‰‹æŒ‡å¤„çš„æ¨ªåæ ‡å’Œçºµåæ ‡
        val x = event.x.toInt()
        val y = event.y.toInt()


        when (event.action) {
            MotionEvent.ACTION_DOWN -> {

                lastX = x
                lastY = y
            }

            MotionEvent.ACTION_MOVE -> {

                //è®¡ç®—ç§»åŠ¨çš„è·ç¦»
                val offX = x - lastX
                val offY = y - lastY

                (parent as View).scrollBy(-offX, -offY)
            }

            MotionEvent.ACTION_UP -> {

                val viewGroup = parent as View

                //å¼€å¯æ»‘åŠ¨,è®©å…¶å›åˆ°åŸç‚¹
                mScroller.startScroll(
                    viewGroup.scrollX,
                    viewGroup.scrollY,
                    -viewGroup.scrollX, -viewGroup.scrollY
                )
            }
        }
        return true
    }


    override fun computeScroll() {
        super.computeScroll()

        if (mScroller.computeScrollOffset()) {
            (parent as View).scrollTo(
                mScroller.currX,
                mScroller.currY
            )
        }

        invalidate()//å¿…é¡»è¦è°ƒç”¨
    }


```


### 7. ViewDragHelper
ä»¥å‰é¡¹ç›®é‡Œé¢å°±ç”¨viewdraghelperå®ç°çš„æ‹–æ‹½ï¼Œä½†æ˜¯è¯´å®è¯ï¼Œä¾µå…¥æ€§æœ‰ç‚¹å¼ºï¼Œå®ƒè¦ä¿®æ”¹çš„æ˜¯Viewæ‰€åœ¨çš„parentViewGroupï¼Œè€Œä¸æ˜¯viewè‡ªèº«ã€‚æ‰€ä»¥ä¸æ˜¯å¾ˆå–œæ¬¢ç”¨è¿™ç§ã€‚
ä»£ç å‚è€ƒ[Drag7FloatingDraggerViewGroup](https://github.com/liaopen123/ViewCollection/blob/master/app/src/main/java/almostlover/com/viewcollection/views/sixway2dragview/drag7viewdraghelper/Drag7FloatingDraggerViewGroup.java)
#### æ‚ä¸ƒæ‚å…«çš„å°Tipsï¼š
1. Viewçš„ç‚¹å‡»äº‹ä»¶æ˜¯åœ¨`onTouch`ä¸­å®ç°ï¼Œæ‰€ä»¥å¤å†™äº†onTouchäº‹ä»¶ï¼Œå¹¶ä¸”è¿˜ä¸è°ƒç”¨`super.onTouch(event)`çš„è¯ï¼Œè¿˜éœ€è¦ä½ æ‰‹åŠ¨åœ¨`MotionEvent.ACTION_UP`è°ƒç”¨`performClick()`ã€‚
2. é€šå¸¸åœ¨æ“ä½œUIçš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›é»˜è®¤çš„é™å®šå‚æ•°ï¼Œæ­¤æ—¶éœ€è¦ç”¨åˆ°`ViewConfiguration`,å®ƒåŒ…å«å¾ˆå¤šè§„å®šçš„å‚æ•°æ¯”å¦‚:
    * getScaledTouchSlop():ç³»ç»Ÿ æ»‘åŠ¨è·ç¦»çš„æœ€å°å€¼ï¼Œå¤§äºè¯¥å€¼å¯ä»¥è®¤ä¸ºæ»‘åŠ¨ã€‚
    * getScaledMinimumFlingVelocity(): è·å¾—å…è®¸æ‰§è¡Œfling ï¼ˆæŠ›ï¼‰çš„æœ€å°é€Ÿåº¦å€¼ã€‚
    * getScaledMaximumFlingVelocity():è·å¾—å…è®¸æ‰§è¡Œfling ï¼ˆæŠ›ï¼‰çš„æœ€å¤§é€Ÿåº¦å€¼ã€‚
    * getTapTimeout() `é™æ€æ–¹æ³•`ï¼Œè·å¾—æ•²å‡»è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœåœ¨æ­¤æ—¶é—´å†…æ²¡æœ‰ç§»åŠ¨ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸€æ¬¡ç‚¹å‡»
    * getDoubleTapTimeout() `é™æ€æ–¹æ³•`ï¼ŒåŒå‡»é—´éš”æ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…è¢«è®¤ä¸ºæ˜¯åŒå‡»
    *  getLongPressTimeout() `é™æ€æ–¹æ³•`ï¼Œé•¿æŒ‰æ—¶é—´ï¼Œè¶…è¿‡æ­¤æ—¶é—´å°±è®¤ä¸ºæ˜¯é•¿æŒ‰
3. åœ¨å­viewå†…éƒ¨ï¼Œè·å–çˆ¶ViewGroupçš„æ–¹å¼:åœ¨`onLayoutæ–¹æ³•ä¸­`é€šè¿‡`getParent() as ViewGroup`è½¬åŒ–æˆVGï¼Œè°ƒç”¨`VG#getWidth()`å’Œ `VG#getHeight()`åˆ†åˆ«å¾—åˆ°çˆ¶ViewGroupçš„å®½åº¦å’Œé«˜åº¦ã€‚ä¸èƒ½åœ¨~~onMeasure()~~è°ƒç”¨ï¼Œå¦åˆ™å¾—åˆ°çš„éƒ½æ˜¯0ã€‚
4. `View#getX()`å’Œ`MotionEvent#getX()`çš„åŒºåˆ«:

    * å…ˆæå‰æ€»ç»“å¥½:`View#getX()`:**viewå·¦ä¸Šè§’ç›¸å¯¹äºçˆ¶å®¹å™¨çš„åæ ‡**,å½“æ²¡æœ‰å‘ç”Ÿ`ä½ç§»`çš„æ—¶å€™,getX()== getLeft(),getY()==getTop()ã€‚å¦‚æœå‘ç”Ÿäº†`ä½ç§»,`åˆ™`trasnslationX==getX()-getLeft()`ã€‚å½“æœªå‘ç”Ÿä½ç§»æ´»åŠ¨çš„æ—¶å€™ï¼Œ`trasnslationX==0`.**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å››ä¸ªæ–¹æ³•è·å–çš„åæ ‡è¡¨ç¤ºçš„æ˜¯ViewåŸå§‹çŠ¶æ€æ—¶ç›¸å¯¹äºçˆ¶å®¹å™¨çš„åæ ‡ï¼Œå¯¹Viewè¿›è¡Œå¹³ç§»æ“ä½œå¹¶ä¸ä¼šæ”¹å˜ç€å››ä¸ªæ–¹æ³•(getLeft,right,top,bottom)çš„è¿”å›å€¼ã€‚**

    * `View`çš„åæ ‡éƒ½æ˜¯**ç›¸å¯¹äºçˆ¶æ§ä»¶**è€Œè¨€çš„ï¼ŒåŒ…æ‹¬`getTop()ã€getBottom()ï¼ŒgetLeft()ï¼ŒgetRight()`ã€‚
    ![](https://ws2.sinaimg.cn/large/006tNc79ly1g2txylvfrfj308s0dc0tc.jpg)
    * `MotionEvent`ä¸­çš„`getRawX()`:**è§¦æ‘¸ç‚¹**ç›¸å¯¹äº**å±å¹•åŸç‚¹çš„xåæ ‡**,`getX()`:**è§¦æ‘¸ç‚¹**ç›¸å¯¹äº**å…¶æ‰€åœ¨ç»„ä»¶åŸç‚¹çš„xåæ ‡**.
å›¾ç¤ºï¼Œ![](https://ws3.sinaimg.cn/large/006tNc79ly1g2ty2yw7cxj309j0diq3j.jpg)
5. æ”¹å˜å¸ƒå±€å‚æ•°ï¼šsetLayoutParamsï¼Œlayoutï¼ŒoffsetLeftAndRight,offsetTopAndBottom é€‚ç”¨äºæœ‰äº¤äº’çš„Viewã€‚å› ä¸ºä»–ä»¬æ˜¯å®Œå…¨ç§»åŠ¨åœ° Viewã€‚Viewçš„xã€yã€leftã€topã€rightã€bottoméƒ½ä¼šç›¸åº”çš„å¢åŠ å¯¹åº”çš„pxã€‚





å‚è€ƒæ–‡ç« :[VAndroid Viewåæ ‡ç³»è¯¦è§£ï¼ˆgetTop()ã€getXã€getTranslationX...ï¼‰](https://blog.csdn.net/u013872857/article/details/53750682)

[Viewåæ ‡åˆ†ææ±‡æ€»](http://www.cnblogs.com/chuiyuan/p/5519344.html)
[ViewDragHelperå®æˆ˜ï¼šAPPå†…â€œæ‚¬æµ®çƒâ€](https://www.jianshu.com/p/d2c80e7e584e)

[androidä¸­å®ç°viewå¯ä»¥æ»‘åŠ¨çš„å…­ç§æ–¹æ³•](http://www.cnblogs.com/fuly550871915/p/4985053.html)
